--- playwright_driver.py.orig
+++ playwright_driver.py
@@ -26,6 +26,16 @@
 LOGIN_JUMP_ROUTE = "**/_____tmd_____/page/login_jump**"

 # Global flag to control tab closing during login
+_CLOSE_NEW_TABS_DURING_LOGIN = False
+
+# Noise filter for console logs - expanded to cover all common noise
+NOISY_LOGS = [
+    "Permissions policy violation",
+    "deviceorientation", "accelerometer", "devicemotion",
+    "日志上报失败", "ScriptProcessorNode", "gyroscope",
+    "APLUS", "脚本放入时机不对", "ERR_BLOCKED_BY_CLIENT",
+    "[endGroup] Error", "current-password",
+    "PC Log已开启", "autoPageExposeSended"
+]
+
+logger = logging.getLogger(__name__)

 # --- add near the top of file ---
 LOGIN_SELECTORS = [
@@ -1049,7 +1059,9 @@
         page = await context.new_page()
-        page.on("console", lambda msg: (
-            None if any(k in msg.text() for k in NOISY) else print(f"[BROWSER:{msg.type()}] {msg.text()}")
-        ))
+        def console_handler(msg):
+            text = msg.text()
+            if not any(noise in text for noise in NOISY_LOGS):
+                print(f"[BROWSER:{msg.type()}] {text}")
+        page.on("console", console_handler)

         return pw, browser, context, page
     except Exception: